% Generated by roxygen2 (4.1.1): do not edit by hand
% Please edit documentation in R/col_apply.R
\name{col_apply}
\alias{col_apply}
\alias{col_apply.zoocat}
\alias{col_apply.zoomlyList}
\title{Apply Functions Over Each Column}
\usage{
col_apply(x, ...)

\method{col_apply}{zoocat}(x, fun, col.as = "vector", ...)

\method{col_apply}{zoomlyList}(x, ...)
}
\arguments{
\item{x}{A object.}

\item{...}{Additional arguments to be passed to or from methods.}

\item{fun}{The function apply for each column.}

\item{col.as}{If vector, each column will be treated as a vector. If
zoo, each column will be treated as a zoo object.}
}
\description{
Apply a function over each column of the \code{zoocat} object
and return a data frame.
}
\examples{
library(lattice)

data(sst)
sstmelt <- melt(sst, id.var = c('year', 'month'))
zc <- cast2zoocat(sstmelt, index.var = 'year', value.var = 'value')
col_apply(zc, fun = function(x) {mean(x, na.rm = TRUE)}, col.as = 'vector')

fuse <- function (x) {
    mean(window(x, start = 1995, end = 2000))
}
retdf <- col_apply(zc, fun = fuse, col.as = 'zoo')
xyplot(output~month|variable, data = retdf, type = 'o')


fuse <- function (x) {
    x <- window(x, start = 1980, end = 2014)
    ret <- c(max(x), min(x), mean(x), median(x), sd(x))
    names(ret) <- c('max', 'min', 'mean', 'median', 'sd')
    return(ret)
}
retdf <- col_apply(zc, fun = fuse, col.as = 'zoo')
xyplot(sd~month|variable, data = retdf, type = 'o')


md <- cast2zoomly(sst, year.var = 'year', value.var = 'nino12',
                   month.var = 'month')
fuse <- function(x) {
    xwd <- window(x, start = 1980, end = 2010)
    c(mean = mean(xwd), max = max(xwd), min = min(xwd))
}
col_apply(md, fun = fuse, col.as = 'zoo')
}

